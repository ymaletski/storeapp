DROP SCHEMA IF EXISTS `storedb` ;

CREATE SCHEMA IF NOT EXISTS `storedb` DEFAULT CHARACTER SET utf8 ;
USE `storedb` ;
-- -----------------------------------------------------
-- Table `storedb`.`T_USERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_USER` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_USER` (`F_USER_ID` BIGINT(20) NOT NULL AUTO_INCREMENT, `F_FIRST_NAME` VARCHAR(45) NOT NULL, `F_LAST_NAME` VARCHAR(45) NOT NULL, `F_EMAIL` VARCHAR(45) NOT NULL, `F_INFORMATION` VARCHAR(255) NULL, `F_ROLE` VARCHAR(45) NOT NULL, `F_PASSWORD` VARCHAR(45) NOT NULL, `F_TEL_NUM` VARCHAR(20) NULL, `F_IS_ACTIVE` BIT(1) NOT NULL, PRIMARY KEY (`F_USER_ID`), UNIQUE INDEX `F_EMAIL_UNIQUE` (`F_EMAIL` ASC)) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_ADDRESSES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_ADDRESS` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_ADDRESS` (`F_ADDRESS_ID` BIGINT(20) NOT NULL AUTO_INCREMENT, `F_CITY` VARCHAR(45) NOT NULL, `F_STREET` VARCHAR(45) NOT NULL, `F_BUILDING_NUM` VARCHAR(10) NOT NULL, `F_ZIPCODE` VARCHAR(12) NOT NULL, PRIMARY KEY (`F_ADDRESS_ID`), CONSTRAINT `fk_T_ADDRESS_T_USER` FOREIGN KEY (`F_ADDRESS_ID`) REFERENCES `storedb`.`T_USER` (`F_USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_GOODS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_GOODS` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_GOODS` (`F_GOODS_ID` BIGINT(20) NOT NULL AUTO_INCREMENT, `F_NAME` VARCHAR(45) NOT NULL, `F_INVENTORY_NUM` VARCHAR(20) NOT NULL, `F_DESCRIPTION` VARCHAR(45) NULL, `F_PRICE` DOUBLE NOT NULL, `F_IS_ACTIVE` BIT(1) NOT NULL, PRIMARY KEY (`F_GOODS_ID`), UNIQUE INDEX `F_NAME_UNIQUE` (`F_NAME` ASC), UNIQUE INDEX `F_INVENTORY_NUM_UNIQUE` (`F_INVENTORY_NUM` ASC)) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_ORDERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_ORDER` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_ORDER` (`F_ORDER_ID` BIGINT(20) NOT NULL AUTO_INCREMENT, `F_STATUS` VARCHAR(15) NOT NULL, `F_ORDER_NUM` VARCHAR(20) NOT NULL, `F_USER_ID` BIGINT(20) NOT NULL, PRIMARY KEY (`F_ORDER_ID`, `F_USER_ID`), UNIQUE INDEX `F_ORDER_NUM_UNIQUE` (`F_ORDER_NUM` ASC), INDEX `fk_T_ORDER_T_USER_idx` (`F_USER_ID` ASC), CONSTRAINT `fk_T_ORDER_T_USER` FOREIGN KEY (`F_USER_ID`) REFERENCES `storedb`.`T_USER` (`F_USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_ORDERS_HAS_T_GOODS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_ORDER_HAS_T_GOODS` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_ORDER_HAS_T_GOODS` ( `F_ORDER_ID` BIGINT(20) NOT NULL, `F_GOODS_ID` BIGINT(20) NOT NULL, `F_GOODS_NUM` INT(11) NOT NULL, PRIMARY KEY (`F_ORDER_ID`, `F_GOODS_ID`), INDEX `fk_T_ORDER_HAS_T_GOODS_T_GOODS_idx` (`F_GOODS_ID` ASC), INDEX `fk_T_ORDER_HAS_T_GOODS_T_ORDER_idx` (`F_ORDER_ID` ASC), CONSTRAINT `fk_T_ORDER_HAS_T_GOODS_T_ORDER` FOREIGN KEY (`F_ORDER_ID`) REFERENCES `storedb`.`T_ORDER` (`F_ORDER_ID`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_T_ORDER_HAS_T_GOODS_T_GOODS` FOREIGN KEY (`F_GOODS_ID`) REFERENCES `storedb`.`T_GOODS` (`F_GOODS_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_NEWS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_NEWS` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_NEWS` (`F_NEWS_ID` BIGINT(20) NOT NULL AUTO_INCREMENT, `F_CAPTION` VARCHAR(45) NOT NULL, `F_CONTENT` VARCHAR(255) NOT NULL, `F_PHOTO` BLOB NULL, `F_DATE` DATE NOT NULL, `F_USER_ID` BIGINT(20) NOT NULL, PRIMARY KEY (`F_NEWS_ID`, `F_USER_ID`), INDEX `fk_T_NEWS_T_USER_idx` (`F_USER_ID` ASC), CONSTRAINT `fk_T_NEWS_T_USER` FOREIGN KEY (`F_USER_ID`) REFERENCES `storedb`.`T_USER` (`F_USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_COMMENTS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_COMMENT` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_COMMENT` (`F_COMMENT_ID` INT NOT NULL AUTO_INCREMENT, `F_DATE` DATE NOT NULL, `F_CONTENT` VARCHAR(255) NOT NULL, `F_NEWS_ID` BIGINT(20) NOT NULL, `F_USER_ID` BIGINT(20) NOT NULL, PRIMARY KEY (`F_COMMENT_ID`, `F_NEWS_ID`, `F_USER_ID`), INDEX `fk_T_COMMENT_T_NEWS_idx` (`F_NEWS_ID` ASC), INDEX `fk_T_COMMENT_T_USER_idx` (`F_USER_ID` ASC), CONSTRAINT `fk_T_COMMENT_T_NEWS` FOREIGN KEY (`F_NEWS_ID`) REFERENCES `storedb`.`T_NEWS` (`F_NEWS_ID`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_T_COMMENT_T_USER` FOREIGN KEY (`F_USER_ID`) REFERENCES `storedb`.`T_USER` (`F_USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
-- -----------------------------------------------------
-- Table `storedb`.`T_FEEDBACK`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `storedb`.`T_FEEDBACK` ;
CREATE TABLE IF NOT EXISTS `storedb`.`T_FEEDBACK` (`F_FEEDBACK_ID` BIGINT(20) NOT NULL, `F_MESSAGE` VARCHAR(255) NOT NULL, `F_USER_ID` BIGINT(20) NOT NULL, PRIMARY KEY (`F_FEEDBACK_ID`, `F_USER_ID`), INDEX `fk_T_FEEDBACK_T_USER_idx` (`F_USER_ID` ASC), CONSTRAINT `fk_T_FEEDBACK_T_USER` FOREIGN KEY (`F_USER_ID`) REFERENCES `storedb`.`T_USER` (`F_USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;
